<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Contour Map Demo</title>
    <meta name="robots" content="index, follow">
	<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
    
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="loading">
        <img src="images/logo.png" alt="">
        <a class="button" href="map.html">Loading...</a>
    </div>
    
    
    <script type="text/javascript" src="js/jquery-latest.min.js"></script>
    <script type="text/javascript">
        if(typeof(Storage) !== "undefined") {
            if (localStorage.getItem('contour_data')) {
                //window.location="map.html";
            } else {
                var uidTimestamp = new Date().getTime();
                var uidNumber = Math.floor(Math.random() * 900000) + 100000;
                var uid = uidTimestamp+uidNumber;
                localStorage.setItem('contour_uid', uid.toString(16));
                $.ajax({
                    url: "http://preview-app.contour7.be/gateway/programme/complete",
                    type: 'GET',
                    success: function (resp) {
                        localStorage.setItem('contour_data', JSON.stringify(resp));
                    },
                    error: function(e) {
                        console.log('Error: '+e);
                    }  
                });
                console.log('Json cached');
            }
        } else {
            alert('Could not be cached');
        }
    </script>
</body>
</html>